pipeline {

    agent any
 stages {
        stage('Example') {
            steps {
                sh '''
echo PATH before is $PATH
PATH=$PATH:/var/jenkins_home/workspace/deployment-pipeline
echo PATH after is $PATH
echo "{ 'foo': 123, 'bar': 456 }" | jq ".foo"
                '''
            }
        }	
     stage('getting latest image from docker hub') {
            steps {
                script {
                 sh './deployment/latest_image.sh'   
                }
            }
            
        }
		
     stage('replacing latest image into deployment.yaml file') {
	     steps {
	         script {
	           sh './deployment/replace_image.sh'
	        	}
         	}
	}

     
     stage('print  deployment.yaml file after replacinf latest image') {
             steps {
               script {
                    sh "cat $deployment.yaml"
                }
             }
        }
		
		
    } 	
	
}
